"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Login=exports.Register=exports.Tab=void 0;var _createClass=function(){function e(s,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}return function(s,n,t){return n&&e(s.prototype,n),t&&e(s,t),s}}(),_tool=require("./tool.js");function _classCallCheck(s,n){if(!(s instanceof n))throw new TypeError("Cannot call a class as a function")}var Tab=function(){function s(){_classCallCheck(this,s),this.regtitle=(0,_tool.$)(".regtop"),this.logtitle=(0,_tool.$)(".logtop"),this.showlog=(0,_tool.$)(".regtop a"),this.showreg=(0,_tool.$)(".logtop a"),this.reg=(0,_tool.$)("#register"),this.log=(0,_tool.$)("#logins")}return _createClass(s,[{key:"init",value:function(){var s=this;this.showreg.onclick=function(){s.showregister()},this.showlog.onclick=function(){s.showlogin()};var n=window.location.search.substr(6);"login"===n?this.showlogin():"register"===n&&this.showregister()}},{key:"showlogin",value:function(){this.regtitle.css({display:"none"}),this.logtitle.css({display:"block"}),this.log.css({display:"block"}),this.reg.css({display:"none"})}},{key:"showregister",value:function(){this.regtitle.css({display:"block"}),this.logtitle.css({display:"none"}),this.log.css({display:"none"}),this.reg.css({display:"block"})}}]),s}(),Register=function(){function s(){_classCallCheck(this,s),this.input=(0,_tool.$)("#register input"),this.span=(0,_tool.$)("#register span"),this.from=(0,_tool.$)("#register")}return _createClass(s,[{key:"init",value:function(){var r=this;this.input[0].onfocus=function(){r.usernameget()},this.input[0].onblur=function(){r.usernamelose()},this.input[1].onfocus=function(){r.passwordget()},this.input[1].oninput=function(){r.passwordon()},this.input[1].onblur=function(){r.passwordlose()},this.input[2].onfocus=function(){r.emailget()},this.input[2].onblur=function(){r.emaillose()},this.input[3].onfocus=function(){r.telget()},this.input[3].onblur=function(){r.tellose()},this.from.onsubmit=function(){var s=!1;r.submit();var n=!0,t=!1,e=void 0;try{for(var i,o=r.span[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){if("√"!==i.value.innerHTML){s=!0;break}}}catch(s){t=!0,e=s}finally{try{!n&&o.return&&o.return()}finally{if(t)throw e}}if(s)return!1;_tool.cookie.addcookie("username",r.input[0].value,10)}}},{key:"usernameget",value:function(){this.span[0].css({color:"#666"}).innerHTML="最长14个英文或7个汉字"}},{key:"usernamelose",value:function(){var n=this;""!==this.input[0].value?this.input[0].value.replace(/[\u4e00-\u9fa5]/g,"**").length<=14?/^[\u4e00-\u9fa5_a-zA-Z]*$/.test(this.input[0].value)?(0,_tool.ajax)({type:"post",url:"http://10.31.161.143/wangyikaola/php/register.php",data:{username:this.input[0].value}}).then(function(s){s?n.span[0].css({color:"red"}).innerHTML="用户名已存在":n.span[0].css({color:"green"}).innerHTML="√"}):this.span[0].css({color:"red"}).innerHTML="用户名格式错误":this.span[0].css({color:"red"}).innerHTML="用户名过长":this.span[0].css({color:"red"}).innerHTML="用户名不能为空"}},{key:"passwordget",value:function(){this.span[1].css({color:"#666"}).innerHTML="请输入8-14位密码"}},{key:"passwordon",value:function(){if(8<=this.input[1].value.length){var s=0;switch(/\d+/.test(this.value)&&s++,/[a-z]+/.test(this.value)&&s++,/[A-Z]+/.test(this.value)&&s++,/[\W\_]+/.test(this.value)&&s++,s){case 1:this.span[1].css({color:"red"}).innerHTML="弱";break;case 2:case 3:this.span[1].css({color:"orange"}).innerHTML="中";break;case 4:this.span[1].css({color:"green"}).innerHTML="强"}14<this.input[1].value.length&&(this.span[1].css({color:"red"}).innerHTML="密码过长")}}},{key:"passwordlose",value:function(){""!==this.input[1].value?8<this.input[1].value.length?"弱"!==this.span[1].innerHTML&&"中"!==this.span[1].innerHTML&&"强"!==this.span[1].innerHTML||(this.span[1].css({color:"green"}).innerHTML="√"):this.span[1].css({color:"red"}).innerHTML="密码太短":this.span[1].css({color:"red"}).innerHTML="密码不能为空"}},{key:"emailget",value:function(){this.span[2].css({color:"#666"}).innerHTML="请输入邮箱"}},{key:"emaillose",value:function(){""!==this.input[2].value?/^(\w+[\+\-\_\.]*\w)\@(\w+[\+\-\_\.]*\w+)\.(\w+[\+\-\_\.]*\w+)$/.test(this.input[2].value)?this.span[2].css({color:"green"}).innerHTML="√":this.span[2].css({color:"red"}).innerHTML="请输入正确邮箱":this.span[2].css({color:"red"}).innerHTML="邮箱不能为空"}},{key:"telget",value:function(){this.span[3].css({color:"#666"}).innerHTML="请输入手机号"}},{key:"tellose",value:function(){""!==this.input[3].value?/^1[3578]\d{9}$/.test(this.input[3].value)?this.span[3].css({color:"green"}).innerHTML="√":this.span[3].css({color:"red"}).innerHTML="请输入正确手机号":this.span[3].css({color:"red"}).innerHTML="手机号码不能为空"}},{key:"submit",value:function(){""===this.input[0].value&&(this.span[0].css({color:"red"}).innerHTML="用户名不能为空"),""===this.input[1].value&&(this.span[1].css({color:"red"}).innerHTML="密码不能为空"),""===this.input[2].value&&(this.span[2].css({color:"red"}).innerHTML="邮箱不能为空"),""===this.input[3].value&&(this.span[3].css({color:"red"}).innerHTML="手机号码不能为空")}}]),s}(),Login=function(){function s(){_classCallCheck(this,s),this.username=(0,_tool.$)("#logins input")[0],this.password=(0,_tool.$)("#logins input")[1],this.log=(0,_tool.$)("#logins input")[2],this.span=(0,_tool.$)("#logins span")}return _createClass(s,[{key:"init",value:function(){var s=this;this.log.onclick=function(){""!==s.username.value&&""!==s.password.value?s.login():s.span.css({color:"red"}).innerHTML="请输入用户名和密码"}}},{key:"login",value:function(){var n=this;(0,_tool.ajax)({type:"post",url:"http://10.31.161.143/wangyikaola/php/login.php",data:{username:this.username.value,password:this.password.value}}).then(function(s){s?(_tool.cookie.addcookie("username",n.username.value,10),location.href="index.html"):n.span.css({color:"red"}).innerHTML="用户名或密码错误"})}}]),s}();exports.Tab=Tab,exports.Register=Register,exports.Login=Login;