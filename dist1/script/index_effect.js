"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Stairs=exports.Slideshow=void 0;var _createClass=function(){function e(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_tool=require("./tool.js");function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var Slideshow=function(){function t(){_classCallCheck(this,t),this.picList=(0,_tool.$)(".img-list li"),this.btnList=(0,_tool.$)(".img-pager-items a"),this.btnprev=(0,_tool.$)(".prev"),this.btnnext=(0,_tool.$)(".next"),this.wrap=(0,_tool.$)(".img-panel"),this.login=(0,_tool.$)(".topNavLeftLogin"),this.nologin=(0,_tool.$)(".topNavLeft"),this.user=(0,_tool.$)(".topNavLeftLogin .username"),this.quit=(0,_tool.$)(".topNavLeftLogin .quit"),this.num=0,this.timer=null}return _createClass(t,[{key:"init",value:function(){var i=this,t=this,n=!0,e=!1,o=void 0;try{for(var s,l=function(){var t=s.value;t.onclick=function(){i.tabswith(t)}},a=this.btnList[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)l()}catch(t){e=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(e)throw o}}this.btnnext.onclick=function(){i.eventright()},this.btnprev.onclick=function(){i.eventleft()},this.timing(),this.wrap.hover(function(){clearInterval(t.timer)},function(){t.timing()}),this.exist(),this.quit.onclick=function(){_tool.cookie.delcookie("username"),i.exist()}}},{key:"cleanr",value:function(){var t=!0,i=!1,n=void 0;try{for(var e,o=this.btnList[Symbol.iterator]();!(t=(e=o.next()).done);t=!0){var s=e.value;s.removeClass("active"),this.picList[s.index()].css({opacity:0,zIndex:1})}}catch(t){i=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}},{key:"tabswith",value:function(t){this.cleanr(),t.addClass("active"),this.picList[t.index()].css({opacity:1,zIndex:2})}},{key:"eventright",value:function(){this.num++,this.num>this.picList.length-1&&(this.num=0),this.cleanr(),this.btnList[this.num].addClass("active"),this.picList[this.num].css({opacity:1,zIndex:2})}},{key:"eventleft",value:function(){this.num--,this.cleanr(),this.num<0&&(this.num=this.picList.length-1),this.btnList[this.num].addClass("active"),this.picList[this.num].css({opacity:1,zIndex:2})}},{key:"timing",value:function(){var t=this;this.timer=setInterval(function(){t.eventright()},5e3)}},{key:"exist",value:function(){_tool.cookie.getcookie("username")?(this.login.css({display:"flex"}),this.nologin.css({display:"none"}),this.user.innerHTML=_tool.cookie.getcookie("username")):(this.login.css({display:"none"}),this.nologin.css({display:"flex"}))}}]),t}(),Stairs=function(){function t(){_classCallCheck(this,t),this.navlist=(0,_tool.$)(".m-navlist"),this.main=(0,_tool.$)("main"),this.allgoodslist=(0,_tool.$)(".goods"),this.btn=(0,_tool.$)(".m-navlist .nav-item"),this.top=this.main.offsetTop,this.height=this.allgoodslist[0].offsetHeight,this.back=(0,_tool.$)(".bottomPart"),this.goodslist=(0,_tool.$)(".goodslist")}return _createClass(t,[{key:"init",value:function(){var l=this,i=this;(0,_tool.addEvent)(window,"scroll",function(){i.show()},!1);var t=!0,n=!1,e=void 0;try{for(var o,s=this.btn[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){o.value.onclick=function(t){t=t||event,i.skip(this),this.addClass("active"),t.preventDefault?t.preventDefault():t.returnValue=!1}}}catch(t){n=!0,e=t}finally{try{!t&&s.return&&s.return()}finally{if(n)throw e}}this.back.onclick=function(){document.documentElement.scrollTop=0},window.onload=function(){l.show();var t=!0,i=!1,n=void 0;try{for(var e,o=l.goodslist[Symbol.iterator]();!(t=(e=o.next()).done);t=!0){var s=e.value;s.offsetTop<=document.documentElement.clientHeight+document.documentElement.scrollTop&&l.datarender(s.index())}}catch(t){i=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}}},{key:"show",value:function(){document.documentElement.scrollTop>=this.top-15?this.navlist.css({display:"block"}):this.navlist.css({display:"none"}),this.louti()}},{key:"cleanr",value:function(){var t=!0,i=!1,n=void 0;try{for(var e,o=this.btn[Symbol.iterator]();!(t=(e=o.next()).done);t=!0){e.value.removeClass("active")}}catch(t){i=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}}},{key:"skip",value:function(t){this.cleanr(),this.render(t.index()),document.documentElement.scrollTop=this.allgoodslist[t.index()].offsetTop}},{key:"louti",value:function(){var t=document.documentElement.scrollTop,i=!0,n=!1,e=void 0;try{for(var o,s=this.allgoodslist[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;if(t<l.offsetTop+l.offsetHeight/2)return this.cleanr(),this.btn[l.index()].addClass("active"),this.render(l.index()),!1}}catch(t){n=!0,e=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw e}}}},{key:"render",value:function(t){""===this.goodslist[t].innerHTML&&this.datarender(t)}},{key:"datarender",value:function(h){var u=this;(0,_tool.ajax)({url:"http://10.31.161.143/wangyikaola/php/index_render.php",dataType:"json"}).then(function(t){for(var i=t[h],n="",e=0;e<5;e++){var o=!0,s=!1,l=void 0;try{for(var a,r=i[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var c=a.value;n+='\n                    <li>\n                    <div class="goods-bd">\n                        <div class="goods-bd-border">\n                            <div class="goods-img">\n                                <a href="./details.html?sid='+c.sid+'" target="_blank">\n                                    <img src="'+c.url+'"\n                                        alt="">\n                                </a>\n                            </div>\n                            <h5><a href="./details.html?sid='+c.sid+'">'+c.title+"</a></h5>\n                            <h6>"+c.lable+'</h6>\n                            <div class="m-priceitem">\n                                <span class="price"><i class="rmb">￥</i>'+c.price+'</span>\n                                <span class="mktprice"><del>￥'+c.oldpic+'</del></span>\n                            </div>\n                            <a href="./details.html?'+c.sid+'" class="goods-btn">\n                                <span class="goods-btn-span">立即购买</span>\n                            </a>\n                        </div>\n                    </div>\n                </li>\n                    '}}catch(t){s=!0,l=t}finally{try{!o&&r.return&&r.return()}finally{if(s)throw l}}}u.goodslist[h].innerHTML=n})}}]),t}();exports.Slideshow=Slideshow,exports.Stairs=Stairs;